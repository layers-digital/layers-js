!function(){"use strict";const e={Stylesheet:'<style name="layers-auth-dialog">\n    .layers--locked {\n      overflow: hidden !important;\n      pointer-events: none !important;\n    }\n\n    layers-auth-dialog {\n      --color-primary-rgb: 0, 184, 173;\n\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      position: fixed;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      padding: 64px;\n\n      pointer-events: all;\n      background: rgba(var(--color-primary-rgb), 0.7);\n      z-index: 9999999999999;\n      animation: layers--fade-in 0.5s forwards;\n      perspective: 2000px;\n    }\n\n    .layers-auth-dialog__content {\n      position: relative;\n      background: white;\n      border-radius: 8px;\n      overflow: hidden;\n      height: 640px;\n      min-height: 300px;\n      max-height: 100vh;\n\n      width: 420px;\n      min-width: 260px;\n      max-width: 100vw;\n\n      opacity: 0;\n      animation: ease-in-out layers--fade-in 0.3s 0.5s forwards;\n    }\n\n    .layers-auth-dialog__iframe {\n      border: none;\n      width: 100%;\n      height: 100%;\n      opacity: 0;\n    }\n\n    .layers-auth-dialog__close-button {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 42px;\n      height: 42px;\n\n      background: white;\n      border-radius: 50px;\n      font-size: 24px;\n      cursor: pointer;\n      color: rgb(0,0,0,0.6);\n      font-weight: bold;\n    }\n\n    .layers-auth-dialog__close-button:hover {\n      color: rgba(var(--color-primary-rgb), 0.9);\n    }\n\n    .layers--hidden {\n      display: none;\n    }\n\n    @keyframes layers--fade-in {\n      0% { opacity: 0; }\n      100% {opacity: 1; }\n    }\n    @keyframes layers--fade-out {\n      0% { opacity: 1; }\n      100% { opacity: 0; }\n    }\n\n    @keyframes layers--card-exit {\n      0% { opacity: 1; transform: initial; }\n      100% { opacity: 0; transform: translateZ(-100px); }\n    }\n\n    @media only screen and (min-width: 600px) {\n      layers-auth-dialog .layers-auth-dialog__content {\n        animation-duration: 1.4s;\n        animation-name: layers--card-enter;\n      }\n\n      @keyframes layers--card-enter {\n        0% {\n          opacity: 0;\n          transform: translateY(-50px) translateZ(80px) rotateX(-25deg);\n        }\n        20% {\n          opacity: 1;\n        }\n        25% {\n          transform: rotateX(7deg);\n        }\n        45% {\n          transform: rotateX(-2deg);\n        }\n        65% {\n          transform: initial;\n          box-shadow: none;\n        }\n        100% {\n          opacity: 1;\n          box-shadow:\n            0 2.8px 2.2px rgba(0, 0, 0, 0.034),\n            0 6.7px 5.3px rgba(0, 0, 0, 0.048),\n            0 12.5px 10px rgba(0, 0, 0, 0.06),\n            0 22.3px 17.9px rgba(0, 0, 0, 0.072);\n          ;\n        }\n      }\n    }\n\n\n    @media only screen and (max-width: 600px) {\n      layers-auth-dialog {\n        padding: 0;\n      }\n\n      layers-auth-dialog .layers-auth-dialog__content {\n        border-radius: 0px;\n        width: 100vw;\n        min-width: auto;\n        max-width: auto;\n\n        height: 100vh;\n        min-height: auto;\n        max-height: auto;\n      }\n    }\n  </style>\n  ',Element:'\n    <div class="layers-auth-dialog__content">\n      <iframe class="layers-auth-dialog__iframe layers--hidden"></iframe>\n      <div class="layers-auth-dialog__close-button">×</div>\n    </div>\n  '};class t extends HTMLElement{constructor(e){super(),this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t}),this.src=e,t.injectStylesheet(),this.render()}get promise(){return this._promise}resolve(e){this._resolve&&this._resolve(e),this._resolve=this._reject=null}reject(e){try{this._reject&&this._reject(e)}catch(e){}this._resolve=this._reject=null}dismiss(){this.isDismissed||(this._reject&&this.resolve(null),this.isDismissed=!0,this.content.style.animationDelay="0s",this.content.style.animationDuration="0.5s",this.content.style.animationName="layers--card-exit",this.style.animationDelay="0.1s",this.style.animationDuration="0.6s",this.style.animationName="layers--fade-out",this.onanimationend=()=>{this.remove()})}render(){this._rendered||(this._rendered=!0,this.innerHTML=e.Element,this.content=this.querySelector(".layers-auth-dialog__content"),this.addEventListener("click",e=>{e.target===this&&this.dismiss()}),this.iframe=this.querySelector(".layers-auth-dialog__iframe"),this.closeButton=this.querySelector(".layers-auth-dialog__close-button"),this.closeButton.addEventListener("click",()=>{this.dismiss()}))}loadIframe(){this.loadedIframe||(this.loadedIframe=!0,this.iframe.src=this.src,this.iframe.onload=()=>{this.iframe.style.animation="layers--fade-in 0.5s forwards"},this.iframe.classList.remove("layers--hidden"))}connectedCallback(){document.body.classList.add("layers--locked"),setTimeout(()=>{this.loadIframe()},1e3)}disconnectedCallback(){document.body.classList.remove("layers--locked")}static injectStylesheet(){this.injectedStylesheet||(document.head.insertAdjacentHTML("beforeend",e.Stylesheet),this.injectedStylesheet=!0)}static dismiss(){let e=document.querySelector("layers-auth-dialog");e&&e.dismiss()}static launch(e){let n=document.querySelector("layers-auth-dialog");if(n)return n;let r=new t(e);return document.body.insertAdjacentElement("beforeend",r),r}}window.LayersAuthDialog=t;try{customElements.define("layers-auth-dialog",t)}catch(e){window.location=window.location}const n={Stylesheet:"<style name=\"layers-auth-button\">\n    layers-auth-button {\n      font-family: 'Nunito', sans-serif;\n      --color-primary-rgb: 0, 184, 173;\n      --color-primary: rgb(0, 184, 173);\n      --color-dark: rgb(80, 80, 80);\n      --color-light: rgb(255, 255, 255);\n      --color-dark80: rgba(0, 0, 0, 0.8);\n      --color-layers: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAARhpQ0NQSUNDIFByb2ZpbGUAACiRY2BgUkgsKMhhEmBgyM0rKQpyd1KIiIxSYH/CwAqE/Aw8DEaJycUFjgEBPgxAAKNRwbdrDIwg+rIuyCxMebyAKyW1OBlI/wHi7OSCohIGBsYMIFu5vKQAxO4BskWSssHsBSB2EdCBQPYWEDsdwj4BVgNh3wGrCQlyBrI/ANl8SWA2E8guvnQIWwDEhtoLAoKOKflJqQog32sYWlpaaJLoB4KgJLWiBEQ75xdUFmWmZ5QoOAJDKlXBMy9ZT0fByMDIgIEBFO4Q1Z8DweHJKHYGIYYACLE5EgwM/ksZGFj+IMRMehkYFugwMPBPRYipGTIwCOgzMOybk1xaVAY1hpHJmIGBEB8AES5KTSIkBkUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAHhlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAAAGgAwAEAAAAAQAAAAEAAAAARdB4TwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAA1JREFUCB1jYNix9j8ABIYCZbCnDX8AAAAASUVORK5CYII=\");\n      --layers-logo: url(\"data:image/svg+xml,%3Csvg width='168' height='168' viewBox='0 0 168 168' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath opacity='0.55' fill-rule='evenodd' clip-rule='evenodd' d='M55.5341 27.7269C55.5341 13.6427 45.0879 2.08925 31.5627 0.218689C32.9922 0.218689 34.4217 0.218689 35.7412 0.328722C42.7787 0.328722 49.8162 0.878886 56.7437 1.97922C56.7608 1.97922 56.7753 1.98188 56.7879 1.98679C67.2172 3.63876 77.2083 6.60684 86.9801 10.672C102.595 17.2739 116.669 26.7368 128.765 38.8404C140.861 50.944 150.317 65.0282 156.915 80.6529C161.078 90.2987 163.931 100.272 165.583 110.573C165.627 110.613 165.671 110.653 165.716 110.693C166.815 117.625 167.365 124.667 167.365 131.819V131.82C167.365 133.58 167.365 135.34 167.255 137.101C166.045 122.796 154.06 111.683 139.545 111.683H109.086C108.106 107.871 106.803 104.274 105.177 100.679H105.124C101.385 92.3164 96.1069 84.7241 89.5092 78.1221C82.8016 71.4101 74.9944 66.1285 66.6374 62.3874V62.276C63.0096 60.6261 59.3818 59.3061 55.5341 58.3161V27.7269ZM109.086 100.68V100.679H139.541C139.678 100.679 139.815 100.68 139.952 100.681C139.853 100.68 139.754 100.68 139.655 100.68H109.086Z' fill='%23ffffff'/%3E%3Cpath d='M167.25 137.101C166.04 122.907 154.055 111.683 139.54 111.683H109.081H64.8767C59.7086 111.683 55.6401 107.502 55.6401 102.441V58.4275V27.8383C55.6401 13.7541 45.1938 2.20066 31.6686 0.330099C30.3491 0.110033 29.0296 0 27.82 0C25.071 0 22.432 0.440131 19.9029 1.10033C8.35701 4.51135 0 15.1845 0 27.8383V64.6993V139.522C0 154.926 12.4255 167.36 27.82 167.36H103.033H139.54C152.625 167.36 163.731 158.227 166.59 146.014C167.03 143.923 167.36 141.832 167.36 139.632C167.36 138.751 167.25 137.871 167.25 137.101Z' fill='%23ffffff'/%3E%3C/svg%3E%0A\");\n\n      --padding-y: 10px;\n      --padding-x: 16px;\n      --border-radius: 4px;\n\n      display: inline-flex;\n      padding: var(--padding-y) var(--padding-x);\n      cursor: pointer;\n\n      border-radius: var(--border-radius);\n      border: 1px solid transparent;\n\n      line-height: var(--content-height);\n\n      color: var(--color-content);\n      background: var(--color-background);\n    }\n\n    @supports (color: color(display-p3 0 0.72 0.679)) {\n      layers-auth-button {\n        --color-primary: color(display-p3 0 0.72 0.679);\n        --color-layers: var(--color-primary);\n      }\n    }\n\n    /* Block mode */\n    layers-auth-button[block] {\n      display: flex;\n      justify-content: center;\n    }\n\n    /* Inherits the font */\n    layers-auth-button[inherit-font] {\n      font-family: inherit;\n    }\n\n    /* Mode variation: Light | Dark */\n    layers-auth-button:not([light]),\n    layers-auth-button {\n      --color-content: var(--color-primary);\n      --color-background: var(--color-light);\n      --layers-logo-color: var(--color-layers);\n    }\n\n    layers-auth-button[dark] {\n      --color-content: var(--color-light);\n      --color-background: var(--color-layers);\n      --layers-logo-color: var(--color-light);\n    }\n\n    /* Size variation: Small | Normal | Large */\n    layers-auth-button[size=small] {\n      --content-height: 18px;\n      --padding-y: 8px;\n      --padding-x: 14px;\n      font-size: 14px;\n    }\n\n    layers-auth-button[size=normal],\n    layers-auth-button {\n      --content-height: 20px;\n      --padding-y: 10px;\n      --padding-x: 16px;\n      font-size: 16px;\n    }\n\n    layers-auth-button[size=medium] {\n      --content-height: 24px;\n      --padding-y: 12px;\n      --padding-x: 20px;\n      font-size: 18px;\n    }\n\n    layers-auth-button[size=large] {\n      --content-height: 28px;\n      --padding-y: 14px;\n      --padding-x: 24px;\n      font-size: 20px;\n    }\n\n    /* Raised variation */\n    layers-auth-button[raised] {\n      box-shadow:\n        0 2.8px 2.2px rgba(0, 0, 0, 0.034),\n        0 6.7px 5.3px rgba(0, 0, 0, 0.048),\n        0 -3px 8px rgba(0, 0, 0, 0.04);\n    }\n\n    /* Flat mode (no border) */\n    layers-auth-button:not([flat]) {\n      border: 1px solid rgba(0, 0, 0, 0.1);\n    }\n\n    /* Logo inclusion */\n    layers-auth-button:before {\n      content: ' ';\n      --logo-size: max(var(--content-height), 16px);\n      display: inline-block;\n      vertical-align: middle;\n      width: var(--logo-size);\n      height: var(--logo-size);\n      margin-right: 16px;\n      background: var(--layers-logo-color);\n      mask-image: var(--layers-logo);\n      -webkit-mask-image: var(--layers-logo);\n      mask-size: 100% 100%;\n      -webkit-mask-size: 100% 100%;\n    }\n\n    /* Hover effect */\n    layers-auth-button[animate=true] {\n      transition: opacity 0.2s, background 0.2s, border-color 0.2s;\n    }\n    layers-auth-button[dark]:hover {\n      opacity: 0.8;\n    }\n    @supports (color: color(display-p3 0 0.72 0.679)) {\n      layers-auth-button[animate=true] {\n        transition: opacity 0.2s;\n      }\n      layers-auth-button:not([dark]):hover {\n        background: rgba(var(--color-primary-rgb), 0.05);\n      }\n      layers-auth-button:not([dark]):not([flat]):hover {\n        border-color: rgba(var(--color-primary-rgb), 0.4);\n      }\n    }\n    @supports not (color: color(display-p3 0 0.72 0.679)) {\n      layers-auth-button:not([dark]):hover {\n        background: rgba(var(--color-primary-rgb), 0.05);\n      }\n      layers-auth-button:not([dark]):not([flat]):hover {\n        border-color: rgba(var(--color-primary-rgb), 0.4);\n      }\n    }\n    </style>\n  ",Font:"<style name=\"layers-auth-button-font\">\n    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap');\n    </style>\n  ",Element:'\n    <span class="layers-auth-button__text"></span><strong>&nbsp;Layers</strong>\n  '};class r extends HTMLElement{constructor(){super(),this.addEventListener("click",this.launch.bind(this))}connectedCallback(){r.injectStylesheet(),r.properties.forEach(e=>{this.hasAttribute(e.attribute)||void 0===e.default||this.setAttribute(e.attribute,e.default),void 0!==e.property&&Object.defineProperty(this,e.property,{get:()=>this.getAttribute(e.attribute),set:t=>{this.setAttribute(e.attribute,t)}})}),this.render()}render(){this.hasAttribute("inherit-font")||r.injectLayersFont(),this.innerHTML=n.Element,this.querySelector(".layers-auth-button__text").textContent=this.getAttribute("label")}static injectStylesheet(){this.injectedStylesheet||(document.head.insertAdjacentHTML("beforeend",n.Stylesheet),this.injectedStylesheet=!0)}static injectLayersFont(){this.injectedLayersFont||(document.head.insertAdjacentHTML("beforeend",n.Font),this.injectedLayersFont=!0)}static get properties(){return[{attribute:"client-id",property:"client_id",required:!0},{attribute:"redirect-uri",property:"redirect_uri",default:window.location?String(window.location.origin):void 0,required:!0},{attribute:"scope",property:"scope",required:!0},{attribute:"response-type",property:"response_type",default:"code",required:!0},{attribute:"state",property:"state"},{attribute:"mode",property:"mode",default:"redirect"},{attribute:"label",default:"Continuar com",required:!1,observed:!0},{attribute:"inherit-font",observed:!0}]}static get observedAttributes(){return this.properties.filter(e=>e.observed).map(e=>e.attribute)}static buildOAuthUrl(e){let t=new URL("https://id.layers.digital/"),n=[];for(let t of this.properties)t.required&&!e[t.property]&&n.push(t.property);if(n.length>0)throw new Error("Algumas propriedades estão inválidas para iniciar a autenticação com Layers: "+n.join());return t.searchParams.set("client_id",e.client_id),t.searchParams.set("response_type",e.response_type),t.searchParams.set("scope",e.scope),e.state&&t.searchParams.set("state",e.state),t.searchParams.set("display",e.mode),"embedded"===e.mode||"popup"===e.mode?t.searchParams.set("redirect_uri",window.location.origin):t.searchParams.set("redirect_uri",e.redirect_uri),String(t)}static launch(e){try{let a=this.buildOAuthUrl(e);if(e.mode&&"redirect"!==e.mode)if("embedded"===e.mode)t.launch(a);else{if("popup"===e.mode){let e=500,t=600;var n=(window.screen.width-e)/2,r=(window.screen.height-t)/2;return{popupWindow:window.open(a,"layers-auth-dialog","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+e+", height="+t+", top="+r+", left="+n)}}window.alert("Modo de fluxo de Autenticação inválido: "+e.mode)}else window.location=a}catch(e){console.log(e.stack),window.alert(e)}}static onResult(e){r.listeners=r.listeners||[],r.listeners.push(e)}launch(e){const n=r.launch(this)||{};this.injectedMessageListener||(window.addEventListener("message",e=>{let a;try{if(a=JSON.parse(e.data),!a.layers)return;delete a.layers}catch(e){return}const o=r.listeners||[],i=a.error;a=i?null:a;for(const e of o)e(i,a);0===o.length&&console.warn("[LayersAuth] Você deve usar `LayersAuth.onResult(...) para receber os dados de autenticação!`"),t.dismiss(),n.popupWindow&&n.popupWindow.close()}),this.injectedMessageListener=!0)}attributeChangedCallback(e,t,n){this.render()}}window.LayersAuth=r;try{customElements.define("layers-auth-button",r)}catch(e){window.location=window.location}}();
//# sourceMappingURL=LayersAuth.js.map
