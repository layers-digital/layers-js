{"version":3,"file":"LayersAuth.js","sources":["../src/layers-auth-dialog.js","../src/index.js"],"sourcesContent":["const Template = {\n  Stylesheet: `<style name=\"layers-auth-dialog\">\n    .layers--locked {\n      overflow: hidden !important;\n      pointer-events: none !important;\n    }\n\n    layers-auth-dialog {\n      --color-primary-rgb: 0, 184, 173;\n\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      position: fixed;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      padding: 64px;\n\n      pointer-events: all;\n      background: rgba(var(--color-primary-rgb), 0.7);\n      z-index: 9999999999999;\n      animation: layers--fade-in 0.5s forwards;\n      perspective: 2000px;\n    }\n\n    .layers-auth-dialog__content {\n      position: relative;\n      background: white;\n      border-radius: 8px;\n      overflow: hidden;\n      height: 640px;\n      min-height: 300px;\n      max-height: 100vh;\n\n      width: 420px;\n      min-width: 260px;\n      max-width: 100vw;\n\n      opacity: 0;\n      animation: ease-in-out layers--fade-in 0.3s 0.5s forwards;\n    }\n\n    .layers-auth-dialog__iframe {\n      border: none;\n      width: 100%;\n      height: 100%;\n      opacity: 0;\n    }\n\n    .layers-auth-dialog__close-button {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 42px;\n      height: 42px;\n\n      background: white;\n      border-radius: 50px;\n      font-size: 24px;\n      cursor: pointer;\n      color: rgb(0,0,0,0.6);\n      font-weight: bold;\n    }\n\n    .layers-auth-dialog__close-button:hover {\n      color: rgba(var(--color-primary-rgb), 0.9);\n    }\n\n    .layers--hidden {\n      display: none;\n    }\n\n    @keyframes layers--fade-in {\n      0% { opacity: 0; }\n      100% {opacity: 1; }\n    }\n    @keyframes layers--fade-out {\n      0% { opacity: 1; }\n      100% { opacity: 0; }\n    }\n\n    @keyframes layers--card-exit {\n      0% { opacity: 1; transform: initial; }\n      100% { opacity: 0; transform: translateZ(-100px); }\n    }\n\n    @media only screen and (min-width: 600px) {\n      layers-auth-dialog .layers-auth-dialog__content {\n        animation-duration: 1.4s;\n        animation-name: layers--card-enter;\n      }\n\n      @keyframes layers--card-enter {\n        0% {\n          opacity: 0;\n          transform: translateY(-50px) translateZ(80px) rotateX(-25deg);\n        }\n        20% {\n          opacity: 1;\n        }\n        25% {\n          transform: rotateX(7deg);\n        }\n        45% {\n          transform: rotateX(-2deg);\n        }\n        65% {\n          transform: initial;\n          box-shadow: none;\n        }\n        100% {\n          opacity: 1;\n          box-shadow:\n            0 2.8px 2.2px rgba(0, 0, 0, 0.034),\n            0 6.7px 5.3px rgba(0, 0, 0, 0.048),\n            0 12.5px 10px rgba(0, 0, 0, 0.06),\n            0 22.3px 17.9px rgba(0, 0, 0, 0.072);\n          ;\n        }\n      }\n    }\n\n\n    @media only screen and (max-width: 600px) {\n      layers-auth-dialog {\n        padding: 0;\n      }\n\n      layers-auth-dialog .layers-auth-dialog__content {\n        border-radius: 0px;\n        width: 100vw;\n        min-width: auto;\n        max-width: auto;\n\n        height: 100vh;\n        min-height: auto;\n        max-height: auto;\n      }\n    }\n  </style>\n  `,\n\n  Element: `\n    <div class=\"layers-auth-dialog__content\">\n      <iframe class=\"layers-auth-dialog__iframe layers--hidden\"></iframe>\n      <div class=\"layers-auth-dialog__close-button\">×</div>\n    </div>\n  `\n};\n\nclass LayersAuthDialog extends HTMLElement {\n  constructor(url) {\n    super();\n\n    this._promise = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n\n    this.src = url;\n    LayersAuthDialog.injectStylesheet();\n    this.render();\n  }\n\n  get promise() {\n    return this._promise;\n  }\n\n  resolve(value) {\n    this._resolve && this._resolve(value);\n    this._resolve = this._reject = null;\n  }\n\n  reject(error) {\n    try {\n      this._reject && this._reject(error);\n    } catch (e) {}\n    this._resolve = this._reject = null;\n  }\n\n  dismiss() {\n    if (this.isDismissed) {\n      return;\n    }\n\n    if (this._reject) {\n      this.resolve(null);\n    }\n\n    this.isDismissed = true;\n    this.content.style.animationDelay = \"0s\";\n    this.content.style.animationDuration = \"0.5s\";\n    this.content.style.animationName = \"layers--card-exit\";\n    this.style.animationDelay = \"0.1s\";\n    this.style.animationDuration = \"0.6s\";\n    this.style.animationName = \"layers--fade-out\";\n    this.onanimationend = () => {\n      this.remove();\n    };\n  }\n\n  render() {\n    if (this._rendered) {\n      return;\n    }\n    this._rendered = true;\n    this.innerHTML = Template.Element;\n    this.content = this.querySelector(\".layers-auth-dialog__content\");\n    this.addEventListener(\"click\", e => {\n      if (e.target === this) {\n        this.dismiss();\n      }\n    });\n\n    this.iframe = this.querySelector(\".layers-auth-dialog__iframe\");\n\n    this.closeButton = this.querySelector(\".layers-auth-dialog__close-button\");\n    this.closeButton.addEventListener(\"click\", () => {\n      this.dismiss();\n    });\n  }\n\n  loadIframe() {\n    if (this.loadedIframe) return;\n    this.loadedIframe = true;\n    this.iframe.src = this.src;\n    this.iframe.onload = () => {\n      this.iframe.style.animation = \"layers--fade-in 0.5s forwards\";\n    };\n    this.iframe.classList.remove(\"layers--hidden\");\n  }\n\n  connectedCallback() {\n    document.body.classList.add(\"layers--locked\");\n    setTimeout(() => {\n      this.loadIframe();\n    }, 1000);\n  }\n\n  disconnectedCallback() {\n    document.body.classList.remove(\"layers--locked\");\n  }\n\n  static injectStylesheet() {\n    if (this.injectedStylesheet) {\n      return;\n    }\n    document.head.insertAdjacentHTML(\"beforeend\", Template.Stylesheet);\n    this.injectedStylesheet = true;\n  }\n\n  static dismiss() {\n    let existing = document.querySelector(\"layers-auth-dialog\");\n    if (existing) {\n      existing.dismiss();\n    }\n  }\n\n  static launch(url) {\n    let existing = document.querySelector(\"layers-auth-dialog\");\n    if (existing) {\n      return existing;\n    }\n\n    let element = new LayersAuthDialog(url);\n    document.body.insertAdjacentElement(\"beforeend\", element);\n    return element;\n  }\n}\n\nwindow.LayersAuthDialog = LayersAuthDialog;\ntry {\n  customElements.define(\"layers-auth-dialog\", LayersAuthDialog);\n} catch (e) {\n  window.location = window.location;\n}\n\nexport default LayersAuthDialog;\n","import LayersAuthDialog from \"./layers-auth-dialog\";\n\nconst Template = {\n  Stylesheet: `<style name=\"layers-auth-button\">\n    layers-auth-button {\n      font-family: 'Nunito', sans-serif;\n      --color-primary-rgb: 0, 184, 173;\n      --color-primary: rgb(0, 184, 173);\n      --color-dark: rgb(80, 80, 80);\n      --color-light: rgb(255, 255, 255);\n      --color-dark80: rgba(0, 0, 0, 0.8);\n      --color-layers: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAARhpQ0NQSUNDIFByb2ZpbGUAACiRY2BgUkgsKMhhEmBgyM0rKQpyd1KIiIxSYH/CwAqE/Aw8DEaJycUFjgEBPgxAAKNRwbdrDIwg+rIuyCxMebyAKyW1OBlI/wHi7OSCohIGBsYMIFu5vKQAxO4BskWSssHsBSB2EdCBQPYWEDsdwj4BVgNh3wGrCQlyBrI/ANl8SWA2E8guvnQIWwDEhtoLAoKOKflJqQog32sYWlpaaJLoB4KgJLWiBEQ75xdUFmWmZ5QoOAJDKlXBMy9ZT0fByMDIgIEBFO4Q1Z8DweHJKHYGIYYACLE5EgwM/ksZGFj+IMRMehkYFugwMPBPRYipGTIwCOgzMOybk1xaVAY1hpHJmIGBEB8AES5KTSIkBkUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAHhlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAAAGgAwAEAAAAAQAAAAEAAAAARdB4TwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAA1JREFUCB1jYNix9j8ABIYCZbCnDX8AAAAASUVORK5CYII=\");\n      --layers-logo: url(\"data:image/svg+xml,%3Csvg width='168' height='168' viewBox='0 0 168 168' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath opacity='0.55' fill-rule='evenodd' clip-rule='evenodd' d='M55.5341 27.7269C55.5341 13.6427 45.0879 2.08925 31.5627 0.218689C32.9922 0.218689 34.4217 0.218689 35.7412 0.328722C42.7787 0.328722 49.8162 0.878886 56.7437 1.97922C56.7608 1.97922 56.7753 1.98188 56.7879 1.98679C67.2172 3.63876 77.2083 6.60684 86.9801 10.672C102.595 17.2739 116.669 26.7368 128.765 38.8404C140.861 50.944 150.317 65.0282 156.915 80.6529C161.078 90.2987 163.931 100.272 165.583 110.573C165.627 110.613 165.671 110.653 165.716 110.693C166.815 117.625 167.365 124.667 167.365 131.819V131.82C167.365 133.58 167.365 135.34 167.255 137.101C166.045 122.796 154.06 111.683 139.545 111.683H109.086C108.106 107.871 106.803 104.274 105.177 100.679H105.124C101.385 92.3164 96.1069 84.7241 89.5092 78.1221C82.8016 71.4101 74.9944 66.1285 66.6374 62.3874V62.276C63.0096 60.6261 59.3818 59.3061 55.5341 58.3161V27.7269ZM109.086 100.68V100.679H139.541C139.678 100.679 139.815 100.68 139.952 100.681C139.853 100.68 139.754 100.68 139.655 100.68H109.086Z' fill='%23ffffff'/%3E%3Cpath d='M167.25 137.101C166.04 122.907 154.055 111.683 139.54 111.683H109.081H64.8767C59.7086 111.683 55.6401 107.502 55.6401 102.441V58.4275V27.8383C55.6401 13.7541 45.1938 2.20066 31.6686 0.330099C30.3491 0.110033 29.0296 0 27.82 0C25.071 0 22.432 0.440131 19.9029 1.10033C8.35701 4.51135 0 15.1845 0 27.8383V64.6993V139.522C0 154.926 12.4255 167.36 27.82 167.36H103.033H139.54C152.625 167.36 163.731 158.227 166.59 146.014C167.03 143.923 167.36 141.832 167.36 139.632C167.36 138.751 167.25 137.871 167.25 137.101Z' fill='%23ffffff'/%3E%3C/svg%3E%0A\");\n\n      --padding-y: 10px;\n      --padding-x: 16px;\n      --border-radius: 4px;\n\n      display: inline-flex;\n      padding: var(--padding-y) var(--padding-x);\n      cursor: pointer;\n\n      border-radius: var(--border-radius);\n      border: 1px solid transparent;\n\n      line-height: var(--content-height);\n\n      color: var(--color-content);\n      background: var(--color-background);\n    }\n\n    @supports (color: color(display-p3 0 0.72 0.679)) {\n      layers-auth-button {\n        --color-primary: color(display-p3 0 0.72 0.679);\n        --color-layers: var(--color-primary);\n      }\n    }\n\n    /* Block mode */\n    layers-auth-button[block] {\n      display: flex;\n      justify-content: center;\n    }\n\n    /* Inherits the font */\n    layers-auth-button[inherit-font] {\n      font-family: inherit;\n    }\n\n    /* Mode variation: Light | Dark */\n    layers-auth-button:not([light]),\n    layers-auth-button {\n      --color-content: var(--color-primary);\n      --color-background: var(--color-light);\n      --layers-logo-color: var(--color-layers);\n    }\n\n    layers-auth-button[dark] {\n      --color-content: var(--color-light);\n      --color-background: var(--color-layers);\n      --layers-logo-color: var(--color-light);\n    }\n\n    /* Size variation: Small | Normal | Large */\n    layers-auth-button[size=small] {\n      --content-height: 18px;\n      --padding-y: 8px;\n      --padding-x: 14px;\n      font-size: 14px;\n    }\n\n    layers-auth-button[size=normal],\n    layers-auth-button {\n      --content-height: 20px;\n      --padding-y: 10px;\n      --padding-x: 16px;\n      font-size: 16px;\n    }\n\n    layers-auth-button[size=medium] {\n      --content-height: 24px;\n      --padding-y: 12px;\n      --padding-x: 20px;\n      font-size: 18px;\n    }\n\n    layers-auth-button[size=large] {\n      --content-height: 28px;\n      --padding-y: 14px;\n      --padding-x: 24px;\n      font-size: 20px;\n    }\n\n    /* Raised variation */\n    layers-auth-button[raised] {\n      box-shadow:\n        0 2.8px 2.2px rgba(0, 0, 0, 0.034),\n        0 6.7px 5.3px rgba(0, 0, 0, 0.048),\n        0 -3px 8px rgba(0, 0, 0, 0.04);\n    }\n\n    /* Flat mode (no border) */\n    layers-auth-button:not([flat]) {\n      border: 1px solid rgba(0, 0, 0, 0.1);\n    }\n\n    /* Logo inclusion */\n    layers-auth-button:before {\n      content: ' ';\n      --logo-size: max(var(--content-height), 16px);\n      display: inline-block;\n      vertical-align: middle;\n      width: var(--logo-size);\n      height: var(--logo-size);\n      margin-right: 16px;\n      background: var(--layers-logo-color);\n      mask-image: var(--layers-logo);\n      -webkit-mask-image: var(--layers-logo);\n      mask-size: 100% 100%;\n      -webkit-mask-size: 100% 100%;\n    }\n\n    /* Hover effect */\n    layers-auth-button[animate=true] {\n      transition: opacity 0.2s, background 0.2s, border-color 0.2s;\n    }\n    layers-auth-button[dark]:hover {\n      opacity: 0.8;\n    }\n    @supports (color: color(display-p3 0 0.72 0.679)) {\n      layers-auth-button[animate=true] {\n        transition: opacity 0.2s;\n      }\n      layers-auth-button:not([dark]):hover {\n        background: rgba(var(--color-primary-rgb), 0.05);\n      }\n      layers-auth-button:not([dark]):not([flat]):hover {\n        border-color: rgba(var(--color-primary-rgb), 0.4);\n      }\n    }\n    @supports not (color: color(display-p3 0 0.72 0.679)) {\n      layers-auth-button:not([dark]):hover {\n        background: rgba(var(--color-primary-rgb), 0.05);\n      }\n      layers-auth-button:not([dark]):not([flat]):hover {\n        border-color: rgba(var(--color-primary-rgb), 0.4);\n      }\n    }\n    </style>\n  `,\n\n  Font: `<style name=\"layers-auth-button-font\">\n    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap');\n    </style>\n  `,\n\n  Element: `\n    <span class=\"layers-auth-button__text\"></span><strong>&nbsp;Layers</strong>\n  `\n};\n\nclass LayersAuth extends HTMLElement {\n  constructor() {\n    super();\n\n    this.addEventListener(\"click\", this.launch.bind(this));\n  }\n\n  connectedCallback() {\n    LayersAuth.injectStylesheet();\n\n    LayersAuth.properties.forEach(prop => {\n      if (!this.hasAttribute(prop.attribute) && prop.default !== undefined) {\n        this.setAttribute(prop.attribute, prop.default);\n      }\n\n      if (prop.property === undefined) return;\n\n      Object.defineProperty(this, prop.property, {\n        get: () => {\n          return this.getAttribute(prop.attribute);\n        },\n        set: val => {\n          this.setAttribute(prop.attribute, val);\n        }\n      });\n    });\n    this.render();\n  }\n\n  render() {\n    if (!this.hasAttribute(\"inherit-font\")) {\n      LayersAuth.injectLayersFont();\n    }\n\n    this.innerHTML = Template.Element;\n    this.querySelector(\n      \".layers-auth-button__text\"\n    ).textContent = this.getAttribute(\"label\");\n  }\n\n  static injectStylesheet() {\n    if (this.injectedStylesheet) {\n      return;\n    }\n    document.head.insertAdjacentHTML(\"beforeend\", Template.Stylesheet);\n    this.injectedStylesheet = true;\n  }\n  static injectLayersFont() {\n    if (this.injectedLayersFont) {\n      return;\n    }\n    document.head.insertAdjacentHTML(\"beforeend\", Template.Font);\n    this.injectedLayersFont = true;\n  }\n\n  static get properties() {\n    return [\n      {\n        attribute: \"client-id\",\n        property: \"client_id\",\n        required: true\n      },\n      {\n        attribute: \"redirect-uri\",\n        property: \"redirect_uri\",\n        default: window.location ? String(window.location.origin) : undefined,\n        required: true\n      },\n      {\n        attribute: \"scope\",\n        property: \"scope\",\n        required: true\n      },\n      {\n        attribute: \"response-type\",\n        property: \"response_type\",\n        default: \"code\",\n        required: true\n      },\n      {\n        attribute: \"state\",\n        property: \"state\"\n      },\n      {\n        attribute: \"mode\",\n        property: \"mode\",\n        default: \"redirect\"\n      },\n      {\n        attribute: \"label\",\n        default: \"Continuar com\",\n        required: false,\n        observed: true\n      },\n      {\n        attribute: \"inherit-font\",\n        observed: true\n      }\n    ];\n  }\n\n  static get observedAttributes() {\n    return this.properties\n      .filter(prop => prop.observed)\n      .map(prop => prop.attribute);\n  }\n\n  static buildOAuthUrl(params) {\n    let link = new URL(\"https://id.layers.digital/\");\n\n    let missingProps = [];\n    for (let prop of this.properties) {\n      if (prop.required && !params[prop.property]) {\n        missingProps.push(prop.property);\n      }\n    }\n    if (missingProps.length > 0) {\n      throw new Error(\n        \"Algumas propriedades estão inválidas para iniciar a autenticação com Layers: \" +\n          missingProps.join()\n      );\n    }\n\n    link.searchParams.set(\"client_id\", params.client_id);\n    link.searchParams.set(\"response_type\", params.response_type);\n    link.searchParams.set(\"scope\", params.scope);\n    if (params.state) {\n      link.searchParams.set(\"state\", params.state);\n    }\n    link.searchParams.set(\"display\", params.mode);\n    if (params.mode === \"embedded\" || params.mode === \"popup\") {\n      link.searchParams.set(\"redirect_uri\", window.location.origin);\n    } else {\n      link.searchParams.set(\"redirect_uri\", params.redirect_uri);\n    }\n\n    return String(link);\n  }\n\n  static launch(props) {\n    try {\n      let url = this.buildOAuthUrl(props);\n\n      if (!props.mode || props.mode === \"redirect\") {\n        window.location = url;\n      } else if (props.mode === \"embedded\") {\n        LayersAuthDialog.launch(url);\n      } else if (props.mode === \"popup\") {\n        let width = 500;\n        let height = 600;\n        var left = (window.screen.width - width) / 2;\n        var top = (window.screen.height - height) / 2;\n        const popupWindow = window.open(\n          url,\n          \"layers-auth-dialog\",\n          \"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=\" +\n            width +\n            \", height=\" +\n            height +\n            \", top=\" +\n            top +\n            \", left=\" +\n            left\n        );\n        return { popupWindow };\n      } else {\n        window.alert(\"Modo de fluxo de Autenticação inválido: \" + props.mode);\n      }\n    } catch (e) {\n      console.log(e.stack);\n      window.alert(e);\n    }\n  }\n\n  static onResult(listener) {\n    LayersAuth.listeners = LayersAuth.listeners || [];\n    LayersAuth.listeners.push(listener);\n  }\n\n  launch(evt) {\n    const launchData = LayersAuth.launch(this) || {};\n\n    if (this.injectedMessageListener) return;\n\n    window.addEventListener(\"message\", event => {\n      let data;\n      try {\n        data = JSON.parse(event.data);\n        if (!data.layers) {\n          return;\n        }\n        delete data.layers;\n      } catch (e) {\n        return;\n      }\n\n      const listeners = LayersAuth.listeners || [];\n      const error = data.error;\n      data = !error ? data : null;\n      for (const listener of listeners) {\n        listener(error, data);\n      }\n      if (listeners.length === 0) {\n        console.warn(\n          \"[LayersAuth] Você deve usar `LayersAuth.onResult(...) para receber os dados de autenticação!`\"\n        );\n      }\n\n      LayersAuthDialog.dismiss();\n      if (launchData.popupWindow) {\n        launchData.popupWindow.close();\n      }\n    });\n    this.injectedMessageListener = true;\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    this.render();\n  }\n}\n\nwindow.LayersAuth = LayersAuth;\ntry {\n  customElements.define(\"layers-auth-button\", LayersAuth);\n} catch (e) {\n  window.location = window.location;\n}\n"],"names":["Template","Stylesheet","Element","LayersAuthDialog","HTMLElement","[object Object]","url","super","this","_promise","Promise","resolve","reject","_resolve","_reject","src","injectStylesheet","render","promise","value","error","e","isDismissed","content","style","animationDelay","animationDuration","animationName","onanimationend","remove","_rendered","innerHTML","querySelector","addEventListener","target","dismiss","iframe","closeButton","loadedIframe","onload","animation","classList","document","body","add","setTimeout","loadIframe","injectedStylesheet","head","insertAdjacentHTML","existing","element","insertAdjacentElement","window","customElements","define","location","Font","LayersAuth","launch","bind","properties","forEach","prop","hasAttribute","attribute","undefined","default","setAttribute","property","Object","defineProperty","get","getAttribute","set","val","injectLayersFont","textContent","injectedLayersFont","required","String","origin","observed","observedAttributes","filter","map","params","link","URL","missingProps","push","length","Error","join","searchParams","client_id","response_type","scope","state","mode","redirect_uri","props","buildOAuthUrl","width","height","left","screen","top","popupWindow","open","alert","console","log","stack","listener","listeners","evt","launchData","injectedMessageListener","event","data","JSON","parse","layers","warn","close","name","oldVal","newVal"],"mappings":"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"}